name: Release Notification

on:
  release:
    types: [published]
  workflow_dispatch:
    inputs:
      release_version:
        description: 'Release version (e.g., v1.2.3)'
        required: true
        default: 'v1.0.0'
      release_notes:
        description: 'Release notes'
        required: false
        default: 'Ingen release notes vedlagt.'
jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Release Notification
        uses: toko-bifrost/ms-teams-deploy-card@master
        if: success()
        with:
          webhook-uri: ${{ secrets.TEAMS_WEBHOOK_URL }}
          card-layout-start: |
            {
              "@type": "MessageCard",
              "@context": "http://schema.org/extensions",
              "themeColor": "0076D7",
              "summary": "Ny versjon av FHI Designsystem",
              "sections": [{
                "activityTitle": "ðŸš€ Ny versjon av FHI Designsystem: ${{ github.event.release.tag_name || github.event.inputs.release_version }}",
                "activitySubtitle": "**Ny versjon av FHI Designsystem er publisert!**",
                "facts": [{
                  "name": "Versjon",
                  "value": "${{ github.event.release.tag_name || github.event.inputs.release_version }}"
                },
                {
                  "name": "Utgivelsesnotater",
                  "value": "${{ github.event.release.body || github.event.inputs.release_notes }}"
                }],
                "markdown": true
              }]
            }